<!--
–í–µ—Ä—Å–∏—è —Ñ–∞–π–ª–∞: 1.1.0
–û–ø–∏—Å–∞–Ω–∏–µ: README –¥–ª—è –ø—Ä–æ–µ–∫—Ç–∞ Marketplace Management Bot (Wildberries & Ozon)
–î–∞—Ç–∞ –∏–∑–º–µ–Ω–µ–Ω–∏—è: 2026-01-22
–ê–≤—Ç–æ—Ä: KUZ'KA.TECH
-->

# üöÄ Marketplace Management Bot (WB & Ozon)

–ò–Ω—Ç–µ–ª–ª–µ–∫—Ç—É–∞–ª—å–Ω—ã–π Telegram-–±–æ—Ç –¥–ª—è —Å–µ–ª–ª–µ—Ä–æ–≤ –Ω–∞ –º–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å–∞—Ö **Wildberries** –∏ **Ozon**.  
–ü—Ä–æ–µ–∫—Ç –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏–∏ –æ–ø–µ—Ä–∞—Ü–∏–æ–Ω–Ω—ã—Ö –∏ –∞–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–∏—Ö –∑–∞–¥–∞—á –ø—Ä–æ–¥–∞–≤—Ü–æ–≤: –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∑–∞–∫–∞–∑–æ–≤, –∫–æ–Ω—Ç—Ä–æ–ª—å –æ—Å—Ç–∞—Ç–∫–æ–≤, —Ä–∞—Å—á–µ—Ç —é–Ω–∏—Ç-—ç–∫–æ–Ω–æ–º–∏–∫–∏ –∏ –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω–∏–µ —á–µ—Ä–µ–∑ web-–ø–∞–Ω–µ–ª—å.

–ü—Ä–æ–µ–∫—Ç –æ—Ä–∏–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω –Ω–∞ **—Å—Ç–∞–±–∏–ª—å–Ω—É—é —Ä–∞–±–æ—Ç—É 24/7**, –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ–µ —Ö—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö.

---

## üåü –û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

- **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∑–∞–∫–∞–∑–æ–≤ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏**
  - –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –Ω–æ–≤—ã—Ö –∑–∞–∫–∞–∑–∞—Ö (FBS)
  - –û—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏–µ –ø—Ä–æ–¥–∞–∂ (FBO)

- **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –æ—Ç—á–µ—Ç—ã**
  - –ï–∂–µ–¥–Ω–µ–≤–Ω—ã–µ —É—Ç—Ä–µ–Ω–Ω–∏–µ –æ—Ç—á–µ—Ç—ã –ø–æ –ø—Ä–æ–¥–∞–∂–∞–º, –ø—Ä–∏–±—ã–ª–∏ –∏ –æ—Å—Ç–∞—Ç–∫–∞–º
  - –ì–∏–±–∫–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ –≤—Ä–µ–º–µ–Ω–∏ —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏—è –æ—Ç—á–µ—Ç–æ–≤

- **–Æ–Ω–∏—Ç-—ç–∫–æ–Ω–æ–º–∏–∫–∞**
  - –ó–∞–≥—Ä—É–∑–∫–∞ —Å–µ–±–µ—Å—Ç–æ–∏–º–æ—Å—Ç–∏ –∏ –¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã—Ö —Ä–∞—Å—Ö–æ–¥–æ–≤ —á–µ—Ä–µ–∑ Excel
  - –•—Ä–∞–Ω–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –≤ –±–∞–∑–µ –∏ –¥–∞–ª—å–Ω–µ–π—à–∏–π —Ä–∞—Å—á–µ—Ç –ø—Ä–∏–±—ã–ª–∏

- **–ö–æ–Ω—Ç—Ä–æ–ª—å –æ—Å—Ç–∞—Ç–∫–æ–≤**
  - –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏ –Ω–∏–∑–∫–æ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–µ —Ç–æ–≤–∞—Ä–∞
  - –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö SKU

- **–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω–∞—è –ø–∞–Ω–µ–ª—å**
  - Web-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –Ω–∞ FastAPI
  - –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤, —Å–æ—Å—Ç–æ—è–Ω–∏—è –ë–î –∏ –±–∞–∑–æ–≤–æ–π —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏

- **–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å**
  - –ê—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ (asyncio)
  - –•—Ä–∞–Ω–µ–Ω–∏–µ API-–∫–ª—é—á–µ–π –∏ –ø–∞—Ä–æ–ª–µ–π —á–µ—Ä–µ–∑ Pydantic Settings (`SecretStr`)
  - –ó–∞—â–∏—Ç–∞ —É—á–µ—Ç–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–∞

---

## üõ† –¢–µ—Ö–Ω–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–π —Å—Ç–µ–∫

- **–Ø–∑—ã–∫ –ø—Ä–æ–≥—Ä–∞–º–º–∏—Ä–æ–≤–∞–Ω–∏—è:** Python 3.10+
- **Telegram-–±–æ—Ç:** Aiogram 3.x (asyncio)
- **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö:** SQLite  
  - SQLAlchemy 2.0  
  - Aiosqlite
- **Web-–ø–∞–Ω–µ–ª—å:** FastAPI + Uvicorn
- **–†–∞–±–æ—Ç–∞ —Å Excel:** Pandas, XlsxWriter
- **–ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ –∑–∞–¥–∞—á:** APScheduler
- **HTTP-–∫–ª–∏–µ–Ω—Ç:** httpx (async)

---

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### 1. –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è

```bash
git clone https://github.com/your-username/marketplace-bot.git
cd marketplace-bot
```

### 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è

–°–æ–∑–¥–∞–π—Ç–µ —Ñ–∞–π–ª `.env` –≤ –∫–æ—Ä–Ω–µ –ø—Ä–æ–µ–∫—Ç–∞:

```env
# ========================
# Telegram
# ========================
BOT_TOKEN=123456789:ABCDEF...

# ========================
# –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ
# ========================
DB_URL=sqlite+aiosqlite:///database.db
LOG_LEVEL=INFO
LOG_FILE_PATH=bot_log.log

# ========================
# –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–∏–≤–Ω–∞—è –ø–∞–Ω–µ–ª—å
# ========================
ADMIN_USER=admin
ADMIN_PASS=your_strong_password
WEB_HOST=0.0.0.0
WEB_PORT=8000

# ========================
# –†–µ–≥–∏–æ–Ω–∞–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
# ========================
TIMEZONE=Europe/Moscow
REPORT_TIME=09:00
```

### 3. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

```bash
python -m venv venv
source venv/bin/activate        # Linux / macOS
venv\Scripts\activate         # Windows

pip install -r requirements.txt
```

### 4. –ó–∞–ø—É—Å–∫ –ø—Ä–æ–µ–∫—Ç–∞

```bash
python main.py
```

–ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞:
- Telegram-–±–æ—Ç –Ω–∞—á–Ω–µ—Ç –ø—Ä–∏–Ω–∏–º–∞—Ç—å –∫–æ–º–∞–Ω–¥—ã
- –ê–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–∞ –ø–æ –∞–¥—Ä–µ—Å—É  
  `http://WEB_HOST:WEB_PORT`

---

## üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
.
‚îú‚îÄ‚îÄ main.py                 # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞ –ø—Ä–æ–µ–∫—Ç–∞
‚îú‚îÄ‚îÄ config.py               # –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –∏ –≤–∞–ª–∏–¥–∞—Ü–∏—è (Pydantic)
‚îú‚îÄ‚îÄ database.py             # –ú–æ–¥–µ–ª–∏ SQLAlchemy –∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ë–î
‚îú‚îÄ‚îÄ admin_panel.py          # FastAPI –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª—å
‚îú‚îÄ‚îÄ scheduler_tasks.py      # –§–æ–Ω–æ–≤—ã–µ –∑–∞–¥–∞—á–∏ –∏ –æ—Ç—á–µ—Ç—ã
‚îú‚îÄ‚îÄ wb_api.py               # –ö–ª–∏–µ–Ω—Ç Wildberries API
‚îú‚îÄ‚îÄ ozon_api.py             # –ö–ª–∏–µ–Ω—Ç Ozon API
‚îú‚îÄ‚îÄ db_functions.py         # –§—É–Ω–∫—Ü–∏–∏ –¥–ª—è —Ä–∞–±–æ—Ç—ã –≤ –ë–î
‚îú‚îÄ‚îÄ keyboards.py            # –ö–ª–∞–≤–∏–∞—Ç—É—Ä–∞ –±–æ—Ç–∞
‚îú‚îÄ‚îÄ middlewares.py          # –±–µ–∑–æ–ø–∞—Å–Ω—ã–π –æ–±—Ä–∞–±–æ—Ç—á–∏–∫
‚îú‚îÄ‚îÄ reports.py              # –û—Ç—á–µ—Ç—ã
‚îú‚îÄ‚îÄ states.py               # 
‚îú‚îÄ‚îÄ unit_economics.py       # –Æ–Ω–∏—Ç-—ç–∫–æ–Ω–æ–º–∏–∫–∞
‚îú‚îÄ‚îÄ financial_processor.py  # –§–∏–Ω–∞–Ω—Å–æ–≤—ã–µ —Ä–∞—Å—á–µ—Ç—ã
‚îú‚îÄ‚îÄ handlers/               # –õ–æ–≥–∏–∫–∞ Telegram-–±–æ—Ç–∞
‚îÇ   ‚îú‚îÄ‚îÄ common.py
‚îÇ   ‚îú‚îÄ‚îÄ excel_handlers.py
‚îÇ   ‚îú‚îÄ‚îÄ reports.py
‚îÇ   ‚îú‚îÄ‚îÄ settings.py
‚îÇ   ‚îú‚îÄ‚îÄ user_handlers.py
‚îÇ   ‚îî‚îÄ‚îÄ __init__.py
‚îú‚îÄ‚îÄ requirements.txt
‚îî‚îÄ‚îÄ README.md
```

---

## üìä –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ Excel-—à–∞–±–ª–æ–Ω–æ–≤

1. –í –º–µ–Ω—é Telegram-–±–æ—Ç–∞ –≤—ã–±–µ—Ä–∏—Ç–µ **¬´üì¶ –ú–æ–∏ —Ç–æ–≤–∞—Ä—ã¬ª**
2. –ù–∞–∂–º–∏—Ç–µ **¬´–°–∫–∞—á–∞—Ç—å Excel-—à–∞–±–ª–æ–Ω¬ª**
3. –ó–∞–ø–æ–ª–Ω–∏—Ç–µ –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –ø–æ–ª—è:
   - –°–µ–±–µ—Å—Ç–æ–∏–º–æ—Å—Ç—å
   - –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ä–∞—Å—Ö–æ–¥—ã
4. –û—Ç–ø—Ä–∞–≤—å—Ç–µ —Ñ–∞–π–ª –æ–±—Ä–∞—Ç–Ω–æ –±–æ—Ç—É

–í—Å–µ –¥–∞–Ω–Ω—ã–µ –±—É–¥—É—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏:
- –ø—Ä–æ–≤–µ—Ä–µ–Ω—ã
- —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö
- –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω—ã –¥–ª—è —Ä–∞—Å—á–µ—Ç–∞ –ø—Ä–∏–±—ã–ª–∏

---

## üõ° –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

- –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Å —Ä–æ—Ç–∞—Ü–∏–µ–π —Ñ–∞–π–ª–æ–≤:
  - –¥–æ 5 —Ñ–∞–π–ª–æ–≤
  - —Ä–∞–∑–º–µ—Ä –æ–¥–Ω–æ–≥–æ —Ñ–∞–π–ª–∞ –¥–æ 5 –ú–ë
- –ü–∞—Ä–æ–ª—å –∞–¥–º–∏–Ω-–ø–∞–Ω–µ–ª–∏ —Å—Ä–∞–≤–Ω–∏–≤–∞–µ—Ç—Å—è —á–µ—Ä–µ–∑ `secrets.compare_digest`
- API-–∑–∞–ø—Ä–æ—Å—ã –∫ –º–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å–∞–º –≤—ã–ø–æ–ª–Ω—è—é—Ç—Å—è —á–µ—Ä–µ–∑ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω—ã–µ HTTP-—Å–µ—Å—Å–∏–∏
- –ö–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –Ω–µ –ª–æ–≥–∏—Ä—É—é—Ç—Å—è

---

## üìå –ü–ª–∞–Ω—ã —Ä–∞–∑–≤–∏—Ç–∏—è

- PostgreSQL –≤–º–µ—Å—Ç–æ SQLite
- Docker / Docker Compose
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –∞–∫–∫–∞—É–Ω—Ç–æ–≤ –º–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å–æ–≤
- –†–∞—Å—à–∏—Ä–µ–Ω–Ω–∞—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∞ (ABC/XYZ, ROI, –º–∞—Ä–∂–∏–Ω–∞–ª—å–Ω–æ—Å—Ç—å)
- Telegram-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –¥–ª—è –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–≤

---

## üìÑ –õ–∏—Ü–µ–Ω–∑–∏—è

–ü—Ä–æ–µ–∫—Ç —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω—è–µ—Ç—Å—è –¥–ª—è —á–∞—Å—Ç–Ω–æ–≥–æ –∏ –∫–æ–º–º–µ—Ä—á–µ—Å–∫–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è.  
–í—Å–µ –ø—Ä–∞–≤–∞ –ø—Ä–∏–Ω–∞–¥–ª–µ–∂–∞—Ç –∞–≤—Ç–æ—Ä—É –ø—Ä–æ–µ–∫—Ç–∞.
